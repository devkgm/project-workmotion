<?xml version="1.0" encoding="UTF-8"?>
		<!DOCTYPE mapper
		    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		    
<mapper namespace="com.workmotion.app.document.DocumentDAO">

 	<insert id="createDocument" parameterType="DocumentDTO">	
		INSERT INTO DOCUMENT
		(ID,TITLE,CONTENT,TEMPLETE_ID,CREATE_DT,MEMBER_ID,REFERRER,SAVE,PERIOD,PHONE,DEADLINE)
		VALUES
		(DOCUMENT_SEQ.NEXTVAL,#{title},#{content},#{templete_id},#{create_dt},#{member_id},#{referrer},#{save},#{period},#{phone},{deadline})
	</insert> 
	
	<insert id="createFiles" parameterType="DocumentFileDTO">
		INSERT INTO DOCUMENT_FILE 
		VALUES(DOCUMENT_FILE_SEQ.NEXTVAL,#{document_id},#{name},#{ori_name})	
	</insert>
	
	<select id="getDepartment" parameterType="DocumentDTO" resultType="DocumentDTO" >
	
		SELECT D.NAME FROM MEMBER M
			 LEFT JOIN DEPARTMENT D
			 ON M.DEPARTMENT_ID = D.ID
			 WHERE M.ID=#{member_id}
	
	</select>

</mapper>