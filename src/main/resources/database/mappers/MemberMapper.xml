<?xml version="1.0" encoding="UTF-8"?>
		<!DOCTYPE mapper
		    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
		    
<mapper namespace="com.workmotion.app.member.MemberDAO">


		
		
		
		<!-- 디테일 조회  -->
		<select id="detailMember" parameterType="MemberDTO" resultMap="getDetailMemberResult">
		SELECT * FROM member LEFT JOIN avatar USING(id) WHERE email = #{email}	
		</select>
		<resultMap type="MemberDTO" id="getDetailMemberResult">
		<id column="id" property="id"/>
		<result column="rold_id" property="role_id"/>
		<result column="company_id" property="company_id"/>
		<result column="email" property="email"/>
		<result column="password" property="password"/>
		<result column="name" property="name"/>
		<result column="department_id" property="department_id"/>
		<result column="position_id" property="position_id"/>
		<result column="phone" property="phone"/>
		<association property="avatar" javaType="Avatar" >
		<id column="id" property="id"/>
		<result column="name" property="name"/>
		<result column="ori_name" property="ori_name"/>
		</association>
		</resultMap> 
		
		
		<!--회원가입-->
 		<insert id="createMember" parameterType="MemberDTO">
		INSERT INTO member VALUES(member_SEQ.NEXTVAL,0,0,
		#{email},#{password},#{name},0,0,#{phone})
		</insert>
	

	
	
	<!--마이페이지 수정-->
	<update id="updateMember" parameterType="MemberDTO">
		UPDATE member <set>	
		<if test="email != null or email !=''">
		email = #{email},</if>
		<if test="password != null or password !=''">
		password = #{password},</if>
		<if test="name != null or name !=''">
		name = #{name},</if>
		<if test="phone !=null or phone != ''">
		phone = #{phone}
		</if>
		</set>
		WHERE id = #{id}
		</update>   
	
</mapper>